import{t as k,n as $,C as q,l as E,x as H,r as m,g as M,h as D,v as K,i as g,k as t,o as I,b as o,m as _,e as x,_ as T,G as R,f as O,F as W,j as y,A as G}from"./framework.8a6edf47.js";import{e as J,f as A}from"./index.bf86ad50.js";const P=typeof window<"u",F=(d,r=!1)=>P?JSON.parse(localStorage.getItem(d)||String(r)):r,w="vue-docs-prefer-composition",c=k(F(w,!0)),B="vue-docs-prefer-sfc",L=k(F(B,!0));function oe(d){return c.value?!d.optionsOnly:!d.compositionOnly}const U={key:0,class:"preference-tooltip"},V=$({__name:"PreferenceTooltip",setup(d){const r=k(!1),{page:h}=q();let a=P&&localStorage.getItem(w)===null?"default":!1;if(P){const l=location.search.match(/[\?&]api=(\w+)/),e=l&&l[1];if(e==="composition")p(!0,"url-query");else if(e==="options")p(!1,"url-query");else if(location.hash){const n=u(h.value.headers,location.hash);n&&n.optionsOnly?p(!1,"url-header"):n&&n.compositionOnly&&p(!0,"url-header")}}function u(l,e){for(const n of l){if(n.link===e)return n;if(n.children){const f=u(n.children,e);if(f)return f}}}function p(l,e){l&&!c.value?(a=e,c.value=!0,document.documentElement.classList.add("prefer-composition")):!l&&c.value&&(a=e,c.value=!1,document.documentElement.classList.remove("prefer-composition"))}E(()=>{if(!h.value.relativePath.startsWith("tutorial/")&&a!==!1){r.value=!0;const l=H(c,()=>{r.value=!1,l()})}});function C(){r.value=!1,a==="default"&&localStorage.setItem(w,String(c.value))}return(l,e)=>(m(),M(K,{name:"fly-in"},{default:D(()=>[r.value?(m(),g("div",U,[t(a)==="default"?(m(),g(I,{key:0},[e[0]||(e[0]=o("p",null,"现在将默认使用组合式 API 风格。",-1)),e[1]||(e[1]=o("p",null," 一些页面根据所选的 API 风格将包含不同的内容。可以通过此开关在它们之间切换。 ",-1))],64)):_("",!0),t(a)&&t(a).startsWith("url")?(m(),g(I,{key:1},[o("p",null," 正在显示 "+x(t(c)?"组合式":"选项式")+" API 的内容，这是因为 "+x(t(a)==="url-query"?"通过 URL 查询参数指定了。":"目标章节仅适用于此 API。"),1),e[2]||(e[2]=o("p",null," 这与你已保存的首选项不同，且仅会影响当前的浏览会话。 ",-1))],64)):_("",!0),o("p",{class:"actions"},[e[3]||(e[3]=o("a",{href:"/guide/introduction#api-styles"},"了解详情",-1)),o("button",{onClick:C},"知道了")]),e[4]||(e[4]=o("div",{class:"arrow-top"},null,-1)),e[5]||(e[5]=o("div",{class:"arrow-top inner"},null,-1))])):_("",!0)]),_:1}))}});const z=T(V,[["__scopeId","data-v-3809ac97"]]),N={key:0,class:"preference-switch"},Q=["aria-expanded"],X=["hidden","aria-hidden"],Y={class:"switch-container"},Z={key:0,class:"switch-container"},ee=$({__name:"PreferenceSwitch",setup(d){const r=R(),h=O(()=>/^\/(guide|tutorial|examples|style-guide)\//.test(r.path)),a=O(()=>!/^\/guide|style-guide/.test(r.path));let u=k(!0);const p=()=>{u.value=!u.value},C=v=>{v.target.classList.add("no-outline")},l=v=>{v.target.classList.remove("no-outline")},e=S(w,c,"prefer-composition"),n=S(B,L,"prefer-sfc"),f=W("close-sidebar");function S(v,s,i){if(typeof localStorage>"u")return()=>{};const b=document.documentElement.classList;return(j=!s.value)=>{(s.value=j)?b.add(i):b.remove(i),localStorage.setItem(v,String(s.value))}}return(v,s)=>h.value?(m(),g("div",N,[o("button",{class:"toggle","aria-label":"偏好切换开关","aria-controls":"preference-switches","aria-expanded":t(u),onClick:p,onMousedown:C,onBlur:l},[s[8]||(s[8]=o("span",null,"API 风格偏好",-1)),y(t(J),{class:G(["vt-link-icon",{open:t(u)}])},null,8,["class"])],40,Q),o("div",{id:"preference-switches",hidden:!t(u),"aria-hidden":!t(u)},[o("div",Y,[o("label",{class:"options-label",onClick:s[0]||(s[0]=i=>t(e)(!1))},"选项式"),y(t(A),{class:"api-switch","aria-label":"偏好组合式 API","aria-checked":t(c),onClick:s[1]||(s[1]=i=>t(e)())},null,8,["aria-checked"]),o("label",{class:"composition-label",onClick:s[2]||(s[2]=i=>t(e)(!0))},"组合式"),o("a",{class:"switch-link",title:"关于 API 风格偏好",href:"/guide/introduction.html#api-styles",onClick:s[3]||(s[3]=(...i)=>t(f)&&t(f)(...i))},"?"),y(z)]),a.value?(m(),g("div",Z,[o("label",{class:"no-sfc-label",onClick:s[4]||(s[4]=i=>t(n)(!1))},"HTML"),y(t(A),{class:"sfc-switch","aria-label":"偏好单文件组件","aria-checked":t(L),onClick:s[5]||(s[5]=i=>t(n)())},null,8,["aria-checked"]),o("label",{class:"sfc-label",onClick:s[6]||(s[6]=i=>t(n)(!0))},"单文件组件"),o("a",{class:"switch-link",title:"关于单文件组件",href:"/guide/scaling-up/sfc.html",onClick:s[7]||(s[7]=(...i)=>t(f)&&t(f)(...i))},"?")])):_("",!0)],8,X)])):_("",!0)}});const ne=T(ee,[["__scopeId","data-v-9490edee"]]);export{ne as P,L as a,oe as f,c as p};
